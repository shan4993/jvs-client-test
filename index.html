<html>

<head>
  <title>JVS Caller Application</title>
  <script type="text/javascript" src="helper.js"></script>
</head>

<body>
  <h2>Sample app for token retrieval</h2>
  <div>
    <button id="auth-btn">Request a token</button>
    <div id="output"></div>
  </div>
  <script type="text/javascript">
    const helper = new Helper({
      // url: `http://localhost:9091/popup`,
      // CHANGE ME
      // url: `https://jvs-ui-dev.tycho.joonix.net/popup`,
      name: "auth-popup",
    });
    const button = document.querySelector("#auth-btn")
    button.addEventListener("click", async (event) => {
      try {
        const { token } = await helper.requestToken();
        document.getElementById("output").innerHTML = `Successfully retrieved token: ${token}`;
      } catch (err) {
        alert(`Failed to retrieve token: ${err}`);
      }
    });
  </script>
</body>

</html>
